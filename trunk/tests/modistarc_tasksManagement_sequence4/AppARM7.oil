OIL_VERSION = "2.5" : "tests_tasksManagement_sequence4" ;

IMPLEMENTATION trampoline {
    OS { 
        ENUM [EXTENDED] STATUS;
    } ;
    TASK {
        UINT32 STACKSIZE = 32768 ;
        UINT32 [1..10] PRIORITY = 1 ;
    } ;
};

 CPU test {

    OS config {
        STATUS = STANDARD;
	SHUTDOWNHOOK = TRUE;
	APP_SRC = "tests_tasksManagement_sequence4.c";
	APP_SRC = "task1_instance.c";
	TRAMPOLINE_BASE_PATH = "../..";
	CFLAGS  = "-g";
        CFLAGS  = "-I ../";
      	CFLAGS  = "-I ../../tests/embUnit";							// repertoire contenant les sources de  embedded unit
	LDFLAGS = "../../machines/ARM7/Trick/_udivsi3.o ../../machines/ARM7/Trick/_dvmd_tls.o"; // fichiers nécéssaires au linker  pour ARM
    	LDFLAGS = "-L ../../tests/embUnit/lib -lembUnitARM7";					// repertoire comprenant la librairie pour arm 7 de embedded unit
    	LDFLAGS = "-n -T ../../machines/ARM7/ldscript -Map trampoline.map ";
    } ;

    APPMODE std {};

    TASK t1 {
        AUTOSTART =  TRUE { APPMODE = std ; } ;
        PRIORITY = 1;
        ACTIVATION = 1;
        SCHEDULE = NON;
       	STACKSIZE = 32768;
        EVENT = Event1;
    };

    TASK t2 {
      AUTOSTART =  FALSE;
      PRIORITY = 2;
      ACTIVATION = 1;
      SCHEDULE = NON;
	  STACKSIZE = 32768;
      EVENT = Event2;
    };

    EVENT Event1 { MASK=AUTO; };
    EVENT Event2 { MASK=AUTO; };
};
