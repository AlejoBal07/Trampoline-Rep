//---------------------------------------------------------------------------*
//                                                                           *
//                     File 'goil_template_parser.cpp'                       *
//                        Generated by version 1.9.7                         *
//                     december 17th, 2009, at 9h52'4"                       *
//                                                                           *
//---------------------------------------------------------------------------*

//--- START OF USER ZONE 1


//--- END OF USER ZONE 1

//---------------------------------------------------------------------------*

#include "version_libpm.h"
#if LIBPM_VERSION != 629
  #error "This file has been compiled with a version of GALGAS different than the version of libpm"
#endif

//---------------------------------------------------------------------------*

#include <typeinfo>
#include "utilities/MF_MemoryControl.h"
#include "files/C_TextFileWrite.h"
#include "galgas/C_galgas_CLI_Options.h"
#include "goil_template_parser.h"

//---------------------------------------------------------------------------*

#ifndef DO_NOT_GENERATE_CHECKINGS
  #define SOURCE_FILE_AT_LINE(line) "goil_template_parser.ggs", line
  #define COMMA_SOURCE_FILE_AT_LINE(line) , SOURCE_FILE_AT_LINE(line)
#else
  #define SOURCE_FILE_AT_LINE(line) 
  #define COMMA_SOURCE_FILE_AT_LINE(line) 
#endif


//--- START OF USER ZONE 2


//--- END OF USER ZONE 2

//---------------------------------------------------------------------------*
//                                                                           *
//         Implementation of production rule 'template_instruction'          *
//                                                                           *
//---------------------------------------------------------------------------*

void goil_template_parser::
pr_template_instruction_goil_template_parser_66_27_ (goil_template_scanner & inLexique,
                                const GGS_string var_cas_inPrefix,
                                const GGS_string var_cas_inPath,
                                const GGS_systemConfig  var_cas_inCfg,
                                GGS_goilTemplateVariableMap  &var_cas_ioTemplateVariableMap,
                                GGS_string &var_cas_ioResultingString) {
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1__21_) COMMA_HERE) ;
  GGS_goilTemplateValue var_cas_expression ;
  GGS_goilTemplateType var_cas_resultType ;
  nt_expression_ (inLexique, var_cas_inPrefix, var_cas_inPath, var_cas_inCfg, var_cas_ioTemplateVariableMap, var_cas_expression, var_cas_resultType) ;
  switch (var_cas_resultType.enumValue ()) {
  case GGS_goilTemplateType::enum_stringType:
    {
    var_cas_ioResultingString.dotAssign_operation (var_cas_expression.reader_mStringValue (inLexique COMMA_SOURCE_FILE_AT_LINE (86))) ;
    }
    break ;
  case GGS_goilTemplateType::enum_unsignedType:
    {
    var_cas_ioResultingString.dotAssign_operation (var_cas_expression.reader_mUnsigned64Value (inLexique COMMA_SOURCE_FILE_AT_LINE (88)).reader_string (inLexique COMMA_SOURCE_FILE_AT_LINE (88))) ;
    }
    break ;
  case GGS_goilTemplateType::enum_boolType:
    {
    const GGS_bool cond_3206 = (var_cas_expression.reader_mUnsigned64Value (inLexique COMMA_SOURCE_FILE_AT_LINE (90))).operator_isEqual (GGS_uint64 (0ULL)) ;
    if (cond_3206.isBuiltAndTrue ()) {
      var_cas_ioResultingString.appendCString ("false") ;
    }else if (cond_3206.isBuiltAndFalse ()) {
      var_cas_ioResultingString.appendCString ("true") ;
    }
    }
    break ;
  case GGS_goilTemplateType::enum_listType:
    {
    GGS_location (inLexique).reader_location (inLexique COMMA_HERE).signalGGSSemanticError (inLexique, GGS_string ("a list expression cannot be emitted") COMMA_SOURCE_FILE_AT_LINE (97)) ;
    }
    break ;
  case GGS_goilTemplateType::kNotBuilt:
    break ;
  }
}

//---------------------------------------------------------------------------*

void goil_template_parser::
pr_template_instruction_goil_template_parser_66_27_parse (goil_template_scanner & inLexique) {
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1__21_) COMMA_HERE) ;
  nt_expression_parse (inLexique) ;
  GGS_lstring::constructor_retrieveAndResetTemplateString (inLexique COMMA_HERE) ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//         Implementation of production rule 'template_instruction'          *
//                                                                           *
//---------------------------------------------------------------------------*

void goil_template_parser::
pr_template_instruction_goil_template_parser_102_27_ (goil_template_scanner & inLexique,
                                const GGS_string var_cas_inPrefix,
                                const GGS_string var_cas_inPath,
                                const GGS_systemConfig  var_cas_inCfg,
                                GGS_goilTemplateVariableMap  &var_cas_ioTemplateVariableMap,
                                GGS_string &var_cas_ioResultingString) {
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_template) COMMA_HERE) ;
  GGS_lstring  var_cas_templateName ;
  inLexique.assignFromAttribute_tokenString (var_cas_templateName) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_identifier) COMMA_HERE) ;
  ::routine_goilTemplateInvocation (inLexique,  var_cas_templateName,  var_cas_inPrefix,  var_cas_inPath,  var_cas_inCfg,  var_cas_ioTemplateVariableMap,  var_cas_ioResultingString COMMA_SOURCE_FILE_AT_LINE (111)) ;
}

//---------------------------------------------------------------------------*

void goil_template_parser::
pr_template_instruction_goil_template_parser_102_27_parse (goil_template_scanner & inLexique) {
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_template) COMMA_HERE) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_identifier) COMMA_HERE) ;
  GGS_lstring::constructor_retrieveAndResetTemplateString (inLexique COMMA_HERE) ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//         Implementation of production rule 'template_instruction'          *
//                                                                           *
//---------------------------------------------------------------------------*

void goil_template_parser::
pr_template_instruction_goil_template_parser_123_27_ (goil_template_scanner & inLexique,
                                const GGS_string /* var_cas_inPrefix */,
                                const GGS_string /* var_cas_inPath */,
                                const GGS_systemConfig  /* var_cas_inCfg */,
                                GGS_goilTemplateVariableMap  &var_cas_ioTemplateVariableMap,
                                GGS_string &var_cas_ioResultingString) {
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1__3F_) COMMA_HERE) ;
  GGS_lstring  var_cas_columnConstantName ;
  inLexique.assignFromAttribute_tokenString (var_cas_columnConstantName) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_identifier) COMMA_HERE) ;
  GGS_string var_cas_value = GGS_string ("") ;
  GGS_bool var_cas_searchEndOfLine = GGS_bool (true) ;
  GGS_uint  var_cas_idx = var_cas_ioResultingString.reader_length () ;
  GGS_uint _variant_4483 = var_cas_ioResultingString.reader_length () ;
  GGS_bool _condition_4483 (_variant_4483.isBuilt (), true) ;
  while (_condition_4483.isBuiltAndTrue ()) {
    _condition_4483 = ((var_cas_idx).operator_strictSup (GGS_uint (0U))).operator_and (var_cas_searchEndOfLine) ;
    if (_condition_4483.isBuiltAndTrue ()) {
      if (_variant_4483.uintValue () == 0) {
        inLexique.onTheFlyRunTimeError ("loop variant error" COMMA_SOURCE_FILE_AT_LINE (143)) ;
        _condition_4483 = GGS_bool (false) ;
      }else{
        _variant_4483.decrement_operation (inLexique COMMA_HERE) ;
        var_cas_searchEndOfLine = (var_cas_ioResultingString.reader_characterAtIndex (inLexique, var_cas_idx.substract_operation (inLexique, GGS_uint (1U) COMMA_SOURCE_FILE_AT_LINE (138)) COMMA_SOURCE_FILE_AT_LINE (138))).operator_isNotEqual (GGS_char (TO_UNICODE ('\n'))) ;
        var_cas_idx.decrement_operation (inLexique COMMA_SOURCE_FILE_AT_LINE (139)) ;
        const GGS_bool cond_4472 = var_cas_searchEndOfLine ;
        if (cond_4472.isBuiltAndTrue ()) {
          var_cas_value.appendCString (" ") ;
        }
      }
    }
  }
  var_cas_ioTemplateVariableMap.modifier_insertKey (inLexique, var_cas_columnConstantName, GGS_goilTemplateType::constructor_stringType (inLexique COMMA_HERE), GGS_goilTemplateValue::constructor_new (GGS_uint64 (0ULL), var_cas_value, GGS_goilTemplateFieldMapList ::constructor_emptyList ()) COMMA_SOURCE_FILE_AT_LINE (144)) ;
}

//---------------------------------------------------------------------------*

void goil_template_parser::
pr_template_instruction_goil_template_parser_123_27_parse (goil_template_scanner & inLexique) {
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1__3F_) COMMA_HERE) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_identifier) COMMA_HERE) ;
  GGS_lstring::constructor_retrieveAndResetTemplateString (inLexique COMMA_HERE) ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//         Implementation of production rule 'template_instruction'          *
//                                                                           *
//---------------------------------------------------------------------------*

void goil_template_parser::
pr_template_instruction_goil_template_parser_199_27_ (goil_template_scanner & inLexique,
                                const GGS_string var_cas_inPrefix,
                                const GGS_string var_cas_inPath,
                                const GGS_systemConfig  var_cas_inCfg,
                                GGS_goilTemplateVariableMap  &var_cas_ioTemplateVariableMap,
                                GGS_string &var_cas_ioResultingString) {
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_if) COMMA_HERE) ;
  GGS_bool var_cas_currentCondition = GGS_bool (false) ;
  { bool syntaxRepeat_0 = true ;
    while (syntaxRepeat_0) {
        if (((var_cas_currentCondition).operator_not ()).isBuiltAndTrue ()) {
          GGS_goilTemplateValue var_cas_expression ;
          GGS_goilTemplateType var_cas_expressionType ;
          nt_expression_ (inLexique, var_cas_inPrefix, var_cas_inPath, var_cas_inCfg, var_cas_ioTemplateVariableMap, var_cas_expression, var_cas_expressionType) ;
          const GGS_bool cond_6724 = (var_cas_expressionType).operator_isNotEqual (GGS_goilTemplateType::constructor_boolType (inLexique COMMA_HERE)) ;
          if (cond_6724.isBuiltAndTrue ()) {
            GGS_location (inLexique).reader_location (inLexique COMMA_HERE).signalGGSSemanticError (inLexique, GGS_string ("the operand of the 'not' operator should be boolean") COMMA_SOURCE_FILE_AT_LINE (223)) ;
          }
          var_cas_currentCondition = (var_cas_expression.reader_mUnsigned64Value (inLexique COMMA_SOURCE_FILE_AT_LINE (224))).operator_isEqual (GGS_uint64 (1ULL)) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_then) COMMA_HERE) ;
          if ((var_cas_currentCondition).isBuiltAndTrue ()) {
            nt_template_instruction_list_ (inLexique, var_cas_inPrefix, var_cas_inPath, var_cas_inCfg, var_cas_ioTemplateVariableMap, var_cas_ioResultingString) ;
          }else{
            nt_template_instruction_list_parseAndResetTemplateString (inLexique) ;
          }
        }else{
          nt_expression_parse (inLexique) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_then) COMMA_HERE) ;
          nt_template_instruction_list_parseAndResetTemplateString (inLexique) ;
        }
      switch (select_goil_template_parser_0 (inLexique)) {
        case 2 : {
          inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_elsif) COMMA_HERE) ;
          } break ;
        default :
          syntaxRepeat_0 = false ;
          break ;
      }
    }
  }
  switch (select_goil_template_parser_1 (inLexique)) {
    case 1 : {
      } break ;
    case 2 : {
      inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_else) COMMA_HERE) ;
      if (((var_cas_currentCondition).operator_not ()).isBuiltAndTrue ()) {
        nt_template_instruction_list_ (inLexique, var_cas_inPrefix, var_cas_inPath, var_cas_inCfg, var_cas_ioTemplateVariableMap, var_cas_ioResultingString) ;
      }else{
        nt_template_instruction_list_parseAndResetTemplateString (inLexique) ;
      }
      } break ;
    default :
      break ;
  }
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_end) COMMA_HERE) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_if) COMMA_HERE) ;
}

//---------------------------------------------------------------------------*

void goil_template_parser::
pr_template_instruction_goil_template_parser_199_27_parse (goil_template_scanner & inLexique) {
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_if) COMMA_HERE) ;
  { bool syntaxRepeat_0 = true ;
    while (syntaxRepeat_0) {
          nt_expression_parse (inLexique) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_then) COMMA_HERE) ;
          nt_template_instruction_list_parse (inLexique) ;
      switch (select_goil_template_parser_0 (inLexique)) {
        case 2 : {
          inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_elsif) COMMA_HERE) ;
          } break ;
        default :
          syntaxRepeat_0 = false ;
          break ;
      }
    }
  }
  switch (select_goil_template_parser_1 (inLexique)) {
    case 1 : {
      } break ;
    case 2 : {
      inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_else) COMMA_HERE) ;
        nt_template_instruction_list_parse (inLexique) ;
      } break ;
    default :
      break ;
  }
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_end) COMMA_HERE) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_if) COMMA_HERE) ;
  GGS_lstring::constructor_retrieveAndResetTemplateString (inLexique COMMA_HERE) ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//      Implementation of production rule 'template_instruction_list'        *
//                                                                           *
//---------------------------------------------------------------------------*

void goil_template_parser::
pr_template_instruction_list_goil_template_parser_270_33_ (goil_template_scanner & inLexique,
                                const GGS_string var_cas_inPrefix,
                                const GGS_string var_cas_inPath,
                                const GGS_systemConfig  var_cas_inCfg,
                                const GGS_goilTemplateVariableMap  var_cas_inTemplateVariableMap,
                                GGS_string &var_cas_ioResultingString) {
  GGS_goilTemplateVariableMap  var_cas_templateVariableMap = var_cas_inTemplateVariableMap ;
  var_cas_ioResultingString.dotAssign_operation (GGS_lstring ::constructor_retrieveAndResetTemplateString (inLexique COMMA_HERE).ggs_string ()) ;
  { bool syntaxRepeat_2 = true ;
    while (syntaxRepeat_2) {
      switch (select_goil_template_parser_2 (inLexique)) {
        case 2 : {
          nt_template_instruction_ (inLexique, var_cas_inPrefix, var_cas_inPath, var_cas_inCfg, var_cas_templateVariableMap, var_cas_ioResultingString) ;
          var_cas_ioResultingString.dotAssign_operation (GGS_lstring ::constructor_retrieveAndResetTemplateString (inLexique COMMA_HERE).ggs_string ()) ;
          } break ;
        default :
          syntaxRepeat_2 = false ;
          break ;
      }
    }
  }
}

//---------------------------------------------------------------------------*

void goil_template_parser::
pr_template_instruction_list_goil_template_parser_270_33_parseAndResetTemplateString (goil_template_scanner & inLexique) {
  { bool syntaxRepeat_2 = true ;
    while (syntaxRepeat_2) {
      switch (select_goil_template_parser_2 (inLexique)) {
        case 2 : {
          nt_template_instruction_parse (inLexique) ;
          } break ;
        default :
          syntaxRepeat_2 = false ;
          break ;
      }
    }
  }
  GGS_lstring  var_cas_s = GGS_lstring ::constructor_retrieveAndResetTemplateString (inLexique COMMA_HERE) ;
}

//---------------------------------------------------------------------------*

void goil_template_parser::
pr_template_instruction_list_goil_template_parser_270_33_parse (goil_template_scanner & inLexique) {
  { bool syntaxRepeat_2 = true ;
    while (syntaxRepeat_2) {
      switch (select_goil_template_parser_2 (inLexique)) {
        case 2 : {
          nt_template_instruction_parse (inLexique) ;
          } break ;
        default :
          syntaxRepeat_2 = false ;
          break ;
      }
    }
  }
  GGS_lstring::constructor_retrieveAndResetTemplateString (inLexique COMMA_HERE) ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//      Implementation of production rule 'goil_template_start_symbol'       *
//                                                                           *
//---------------------------------------------------------------------------*

void goil_template_parser::
pr_goil_template_start_symbol_goil_template_parser_301_34_ (goil_template_scanner & inLexique,
                                const GGS_string var_cas_inPrefix,
                                const GGS_string var_cas_inPath,
                                const GGS_systemConfig  var_cas_inCfg,
                                const GGS_goilTemplateVariableMap  var_cas_inTemplateVariableMap,
                                GGS_string &var_cas_ioResultingString) {
  nt_template_instruction_list_ (inLexique, var_cas_inPrefix, var_cas_inPath, var_cas_inCfg, var_cas_inTemplateVariableMap, var_cas_ioResultingString) ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//         Implementation of production rule 'template_instruction'          *
//                                                                           *
//---------------------------------------------------------------------------*

void goil_template_parser::
pr_template_instruction_goil_template_parser_319_27_ (goil_template_scanner & inLexique,
                                const GGS_string var_cas_inPrefix,
                                const GGS_string var_cas_inPath,
                                const GGS_systemConfig  var_cas_inCfg,
                                GGS_goilTemplateVariableMap  &var_cas_ioTemplateVariableMap,
                                GGS_string &var_cas_ioResultingString) {
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_foreach) COMMA_HERE) ;
  GGS_uint  var_cas_shortestListLentgh = GGS_uint ::constructor_max (inLexique COMMA_HERE) ;
  GGS_goilTemplateEnumationList  var_cas_enumerationList = GGS_goilTemplateEnumationList ::constructor_emptyList () ;
  { bool syntaxRepeat_3 = true ;
    while (syntaxRepeat_3) {
        GGS_goilTemplateValue var_cas_enumeratedValue ;
        GGS_goilTemplateType var_cas_expressionType ;
        nt_expression_ (inLexique, var_cas_inPrefix, var_cas_inPath, var_cas_inCfg, var_cas_ioTemplateVariableMap, var_cas_enumeratedValue, var_cas_expressionType) ;
        const GGS_bool cond_9610 = (var_cas_expressionType).operator_isNotEqual (GGS_goilTemplateType::constructor_listType (inLexique COMMA_HERE)) ;
        if (cond_9610.isBuiltAndTrue ()) {
          GGS_location (inLexique).reader_location (inLexique COMMA_HERE).signalGGSSemanticError (inLexique, GGS_string ("only a list can be enumerated") COMMA_SOURCE_FILE_AT_LINE (344)) ;
        }else if (cond_9610.isBuiltAndFalse ()) {
          const GGS_bool cond_9757 = (var_cas_shortestListLentgh).operator_strictSup (var_cas_enumeratedValue.reader_mMapListValue (inLexique COMMA_SOURCE_FILE_AT_LINE (344)).reader_length ()) ;
          if (cond_9757.isBuiltAndTrue ()) {
            var_cas_shortestListLentgh = var_cas_enumeratedValue.reader_mMapListValue (inLexique COMMA_SOURCE_FILE_AT_LINE (345)).reader_length () ;
          }
        }
        GGS_string var_cas_foreachPrefix ;
        switch (select_goil_template_parser_4 (inLexique)) {
          case 1 : {
            var_cas_foreachPrefix = GGS_string ("") ;
            } break ;
          case 2 : {
            inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_prefixedby) COMMA_HERE) ;
            GGS_lstring  var_cas_prefixString ;
            inLexique.assignFromAttribute_tokenString (var_cas_prefixString) ;
            inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_identifier) COMMA_HERE) ;
            var_cas_foreachPrefix = var_cas_prefixString.reader_string (inLexique COMMA_SOURCE_FILE_AT_LINE (353)) ;
            } break ;
          default :
            break ;
        }
        var_cas_enumerationList.addAssign_operation (var_cas_enumeratedValue, var_cas_foreachPrefix) ;
      switch (select_goil_template_parser_3 (inLexique)) {
        case 2 : {
          inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1__2C_) COMMA_HERE) ;
          } break ;
        default :
          syntaxRepeat_3 = false ;
          break ;
      }
    }
  }
  switch (select_goil_template_parser_5 (inLexique)) {
    case 1 : {
      } break ;
    case 2 : {
      inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_before) COMMA_HERE) ;
      if (((var_cas_shortestListLentgh).operator_strictSup (GGS_uint (0U))).isBuiltAndTrue ()) {
        nt_template_instruction_list_ (inLexique, var_cas_inPrefix, var_cas_inPath, var_cas_inCfg, var_cas_ioTemplateVariableMap, var_cas_ioResultingString) ;
      }else{
        nt_template_instruction_list_parseAndResetTemplateString (inLexique) ;
      }
      } break ;
    default :
      break ;
  }
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_do) COMMA_HERE) ;
  GGS_uint  var_cas_idx = GGS_uint (0U) ;
  GGS_uint _variant_11968 = var_cas_shortestListLentgh ;
  const C_parsingContext context_11968 = inLexique.parsingContext () ;
  nt_template_instruction_list_parse (inLexique) ;
  switch (select_goil_template_parser_6 (inLexique)) {
    case 1 : {
      } break ;
    case 2 : {
      inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_between) COMMA_HERE) ;
        nt_template_instruction_list_parse (inLexique) ;
      } break ;
    default :
      break ;
  }
  GGS_bool _condition_11968 ;
  if (_variant_11968.isBuilt ()) {
    _condition_11968 = (var_cas_idx).operator_strictInf (var_cas_shortestListLentgh) ;
  }
  while (_condition_11968.isBuiltAndTrue ()) {
    inLexique.setParsingContext (context_11968) ;
    if (_variant_11968.uintValue () == 0) {
      inLexique.onTheFlyRunTimeError ("loop variant error" COMMA_SOURCE_FILE_AT_LINE (426)) ;
      _condition_11968 = GGS_bool (false) ;
    }else{
      _variant_11968.decrement_operation (inLexique COMMA_HERE) ;
      GGS_goilTemplateVariableMap  var_cas_templateVariableMap = var_cas_ioTemplateVariableMap ;
      {
        GGS_goilTemplateEnumationList::cEnumerator enumerator_10615 (var_cas_enumerationList, true) ;
        const GGS_goilTemplateEnumationList::cElement * operand_10615 = NULL ;
        while (((operand_10615 = enumerator_10615.nextObject ()))) {
          macroValidPointer (operand_10615) ;
          const GGS_goilTemplateFieldMap  var_cas_fieldMap = operand_10615->mEnumeratedValue.reader_mMapListValue (inLexique COMMA_SOURCE_FILE_AT_LINE (383)).reader_mMapAtIndex (inLexique, var_cas_idx COMMA_SOURCE_FILE_AT_LINE (383)) ;
          {
            GGS_goilTemplateFieldMap::cEnumerator enumerator_10741 (var_cas_fieldMap, true) ;
            const GGS_goilTemplateFieldMap::cElement * operand_10741 = NULL ;
            while (((operand_10741 = enumerator_10741.nextObject ()))) {
              macroValidPointer (operand_10741) ;
              GGS_lstring  var_cas_varName = GGS_lstring ::constructor_new (inLexique, (operand_10615->mPrefix).operator_concat (operand_10741->mKey.reader_string (inLexique COMMA_SOURCE_FILE_AT_LINE (385))), operand_10741->mKey.reader_location (inLexique COMMA_SOURCE_FILE_AT_LINE (385)) COMMA_HERE) ;
              const GGS_bool cond_10963 = var_cas_templateVariableMap.reader_hasKey (var_cas_varName.reader_string (inLexique COMMA_SOURCE_FILE_AT_LINE (386))) ;
              if (cond_10963.isBuiltAndTrue ()) {
                GGS_goilTemplateType automatic_var_0 ;
                GGS_goilTemplateValue automatic_var_1 ;
                var_cas_templateVariableMap.modifier_removeKey (inLexique, var_cas_varName, automatic_var_0, automatic_var_1 COMMA_SOURCE_FILE_AT_LINE (387)) ;
              }
              var_cas_templateVariableMap.modifier_insertKey (inLexique, GGS_lstring ::constructor_new (inLexique, (operand_10615->mPrefix).operator_concat (operand_10741->mKey.reader_string (inLexique COMMA_SOURCE_FILE_AT_LINE (390))), operand_10741->mKey.reader_location (inLexique COMMA_SOURCE_FILE_AT_LINE (390)) COMMA_HERE), operand_10741->mInfo.mType, GGS_goilTemplateValue::constructor_new (operand_10741->mInfo.mUnsigned64Value, operand_10741->mInfo.mStringValue, operand_10741->mInfo.mListValue) COMMA_SOURCE_FILE_AT_LINE (389)) ;
            }
          }
        }
      }
      const GGS_bool cond_11358 = var_cas_templateVariableMap.reader_hasKey (GGS_string ("INDEX")) ;
      if (cond_11358.isBuiltAndTrue ()) {
        GGS_goilTemplateType automatic_var_2 ;
        GGS_goilTemplateValue automatic_var_3 ;
        var_cas_templateVariableMap.modifier_removeKey (inLexique, GGS_lstring ::constructor_new (inLexique, GGS_string ("INDEX"), GGS_location (inLexique) COMMA_HERE), automatic_var_2, automatic_var_3 COMMA_SOURCE_FILE_AT_LINE (398)) ;
      }
      ::routine_addUnsignedValue (inLexique,  var_cas_templateVariableMap,  GGS_lstring ::constructor_new (inLexique, GGS_string ("INDEX"), GGS_location (inLexique) COMMA_HERE),  var_cas_idx.reader_uint64 (inLexique COMMA_SOURCE_FILE_AT_LINE (400)) COMMA_SOURCE_FILE_AT_LINE (400)) ;
      nt_template_instruction_list_ (inLexique, var_cas_inPrefix, var_cas_inPath, var_cas_inCfg, var_cas_templateVariableMap, var_cas_ioResultingString) ;
      var_cas_idx.increment_operation (inLexique COMMA_SOURCE_FILE_AT_LINE (409)) ;
      switch (select_goil_template_parser_6 (inLexique)) {
        case 1 : {
          } break ;
        case 2 : {
          inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_between) COMMA_HERE) ;
          if (((var_cas_idx).operator_strictInf (var_cas_shortestListLentgh)).isBuiltAndTrue ()) {
            nt_template_instruction_list_ (inLexique, var_cas_inPrefix, var_cas_inPath, var_cas_inCfg, var_cas_ioTemplateVariableMap, var_cas_ioResultingString) ;
          }else{
            nt_template_instruction_list_parseAndResetTemplateString (inLexique) ;
          }
          } break ;
        default :
          break ;
      }
      _condition_11968 = (var_cas_idx).operator_strictInf (var_cas_shortestListLentgh) ;
    }
  }
  GGS_lstring  var_cas_s = GGS_lstring ::constructor_retrieveAndResetTemplateString (inLexique COMMA_HERE) ;
  switch (select_goil_template_parser_7 (inLexique)) {
    case 1 : {
      } break ;
    case 2 : {
      inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_after) COMMA_HERE) ;
      if (((var_cas_shortestListLentgh).operator_strictSup (GGS_uint (0U))).isBuiltAndTrue ()) {
        nt_template_instruction_list_ (inLexique, var_cas_inPrefix, var_cas_inPath, var_cas_inCfg, var_cas_ioTemplateVariableMap, var_cas_ioResultingString) ;
      }else{
        nt_template_instruction_list_parseAndResetTemplateString (inLexique) ;
      }
      } break ;
    default :
      break ;
  }
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_end) COMMA_HERE) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_foreach) COMMA_HERE) ;
}

//---------------------------------------------------------------------------*

void goil_template_parser::
pr_template_instruction_goil_template_parser_319_27_parse (goil_template_scanner & inLexique) {
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_foreach) COMMA_HERE) ;
  { bool syntaxRepeat_3 = true ;
    while (syntaxRepeat_3) {
        nt_expression_parse (inLexique) ;
        switch (select_goil_template_parser_4 (inLexique)) {
          case 1 : {
            } break ;
          case 2 : {
            inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_prefixedby) COMMA_HERE) ;
            inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_identifier) COMMA_HERE) ;
            } break ;
          default :
            break ;
        }
      switch (select_goil_template_parser_3 (inLexique)) {
        case 2 : {
          inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1__2C_) COMMA_HERE) ;
          } break ;
        default :
          syntaxRepeat_3 = false ;
          break ;
      }
    }
  }
  switch (select_goil_template_parser_5 (inLexique)) {
    case 1 : {
      } break ;
    case 2 : {
      inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_before) COMMA_HERE) ;
        nt_template_instruction_list_parse (inLexique) ;
      } break ;
    default :
      break ;
  }
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_do) COMMA_HERE) ;
    nt_template_instruction_list_parse (inLexique) ;
    switch (select_goil_template_parser_6 (inLexique)) {
      case 1 : {
        } break ;
      case 2 : {
        inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_between) COMMA_HERE) ;
          nt_template_instruction_list_parse (inLexique) ;
        } break ;
      default :
        break ;
    }
  switch (select_goil_template_parser_7 (inLexique)) {
    case 1 : {
      } break ;
    case 2 : {
      inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_after) COMMA_HERE) ;
        nt_template_instruction_list_parse (inLexique) ;
      } break ;
    default :
      break ;
  }
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_end) COMMA_HERE) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_foreach) COMMA_HERE) ;
  GGS_lstring::constructor_retrieveAndResetTemplateString (inLexique COMMA_HERE) ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//         Implementation of production rule 'template_instruction'          *
//                                                                           *
//---------------------------------------------------------------------------*

void goil_template_parser::
pr_template_instruction_goil_template_parser_452_27_ (goil_template_scanner & inLexique,
                                const GGS_string var_cas_inPrefix,
                                const GGS_string var_cas_inPath,
                                const GGS_systemConfig  var_cas_inCfg,
                                GGS_goilTemplateVariableMap  &var_cas_ioTemplateVariableMap,
                                GGS_string &var_cas_ioResultingString) {
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_for) COMMA_HERE) ;
  GGS_lstring  var_cas_variableName ;
  inLexique.assignFromAttribute_tokenString (var_cas_variableName) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_identifier) COMMA_HERE) ;
  const GGS_bool cond_12872 = var_cas_ioTemplateVariableMap.reader_hasKey (var_cas_variableName.reader_string (inLexique COMMA_SOURCE_FILE_AT_LINE (460))) ;
  if (cond_12872.isBuiltAndTrue ()) {
    GGS_goilTemplateType automatic_var_4 ;
    GGS_goilTemplateValue automatic_var_5 ;
    var_cas_ioTemplateVariableMap.modifier_removeKey (inLexique, var_cas_variableName, automatic_var_4, automatic_var_5 COMMA_SOURCE_FILE_AT_LINE (461)) ;
  }
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_in) COMMA_HERE) ;
  GGS_goilTemplateExpressionList  var_cas_enumerationList = GGS_goilTemplateExpressionList ::constructor_emptyList () ;
  { bool syntaxRepeat_8 = true ;
    while (syntaxRepeat_8) {
        GGS_goilTemplateValue var_cas_enumeratedValue ;
        GGS_goilTemplateType var_cas_expressionType ;
        nt_expression_ (inLexique, var_cas_inPrefix, var_cas_inPath, var_cas_inCfg, var_cas_ioTemplateVariableMap, var_cas_enumeratedValue, var_cas_expressionType) ;
        const GGS_bool cond_13430 = (((var_cas_expressionType).operator_isNotEqual (GGS_goilTemplateType::constructor_boolType (inLexique COMMA_HERE))).operator_and ((var_cas_expressionType).operator_isNotEqual (GGS_goilTemplateType::constructor_unsignedType (inLexique COMMA_HERE)))).operator_and ((var_cas_expressionType).operator_isNotEqual (GGS_goilTemplateType::constructor_stringType (inLexique COMMA_HERE))) ;
        if (cond_13430.isBuiltAndTrue ()) {
          GGS_location (inLexique).reader_location (inLexique COMMA_HERE).signalGGSSemanticError (inLexique, GGS_string ("only a bool, integer or string can be enumerated") COMMA_SOURCE_FILE_AT_LINE (480)) ;
        }
        var_cas_enumerationList.addAssign_operation (var_cas_enumeratedValue, var_cas_expressionType) ;
      switch (select_goil_template_parser_8 (inLexique)) {
        case 2 : {
          inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1__2C_) COMMA_HERE) ;
          } break ;
        default :
          syntaxRepeat_8 = false ;
          break ;
      }
    }
  }
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_do) COMMA_HERE) ;
  GGS_uint  var_cas_idx = GGS_uint (0U) ;
  GGS_uint _variant_14674 = var_cas_enumerationList.reader_length () ;
  const C_parsingContext context_14674 = inLexique.parsingContext () ;
  nt_template_instruction_list_parse (inLexique) ;
  switch (select_goil_template_parser_9 (inLexique)) {
    case 1 : {
      } break ;
    case 2 : {
      inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_between) COMMA_HERE) ;
        nt_template_instruction_list_parse (inLexique) ;
      } break ;
    default :
      break ;
  }
  GGS_bool _condition_14674 ;
  if (_variant_14674.isBuilt ()) {
    _condition_14674 = (var_cas_enumerationList.reader_length ()).operator_strictSup (GGS_uint (0U)) ;
  }
  while (_condition_14674.isBuiltAndTrue ()) {
    inLexique.setParsingContext (context_14674) ;
    if (_variant_14674.uintValue () == 0) {
      inLexique.onTheFlyRunTimeError ("loop variant error" COMMA_SOURCE_FILE_AT_LINE (528)) ;
      _condition_14674 = GGS_bool (false) ;
    }else{
      _variant_14674.decrement_operation (inLexique COMMA_HERE) ;
      GGS_goilTemplateVariableMap  var_cas_templateVariableMap = var_cas_ioTemplateVariableMap ;
      GGS_goilTemplateValue var_cas_value ;
      GGS_goilTemplateType var_cas_type ;
      var_cas_enumerationList.modifier_popFirst (inLexique, var_cas_value, var_cas_type COMMA_SOURCE_FILE_AT_LINE (493)) ;
      var_cas_templateVariableMap.modifier_insertKey (inLexique, var_cas_variableName, var_cas_type, var_cas_value COMMA_SOURCE_FILE_AT_LINE (494)) ;
      const GGS_bool cond_14054 = var_cas_templateVariableMap.reader_hasKey (GGS_string ("INDEX")) ;
      if (cond_14054.isBuiltAndTrue ()) {
        GGS_goilTemplateType automatic_var_6 ;
        GGS_goilTemplateValue automatic_var_7 ;
        var_cas_templateVariableMap.modifier_removeKey (inLexique, GGS_lstring ::constructor_new (inLexique, GGS_string ("INDEX"), GGS_location (inLexique) COMMA_HERE), automatic_var_6, automatic_var_7 COMMA_SOURCE_FILE_AT_LINE (500)) ;
      }
      ::routine_addUnsignedValue (inLexique,  var_cas_templateVariableMap,  GGS_lstring ::constructor_new (inLexique, GGS_string ("INDEX"), GGS_location (inLexique) COMMA_HERE),  var_cas_idx.reader_uint64 (inLexique COMMA_SOURCE_FILE_AT_LINE (502)) COMMA_SOURCE_FILE_AT_LINE (502)) ;
      nt_template_instruction_list_ (inLexique, var_cas_inPrefix, var_cas_inPath, var_cas_inCfg, var_cas_templateVariableMap, var_cas_ioResultingString) ;
      var_cas_idx.increment_operation (inLexique COMMA_SOURCE_FILE_AT_LINE (511)) ;
      switch (select_goil_template_parser_9 (inLexique)) {
        case 1 : {
          } break ;
        case 2 : {
          inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_between) COMMA_HERE) ;
          if (((var_cas_enumerationList.reader_length ()).operator_strictSup (GGS_uint (0U))).isBuiltAndTrue ()) {
            nt_template_instruction_list_ (inLexique, var_cas_inPrefix, var_cas_inPath, var_cas_inCfg, var_cas_ioTemplateVariableMap, var_cas_ioResultingString) ;
          }else{
            nt_template_instruction_list_parseAndResetTemplateString (inLexique) ;
          }
          } break ;
        default :
          break ;
      }
      _condition_14674 = (var_cas_enumerationList.reader_length ()).operator_strictSup (GGS_uint (0U)) ;
    }
  }
  GGS_lstring  var_cas_s = GGS_lstring ::constructor_retrieveAndResetTemplateString (inLexique COMMA_HERE) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_end) COMMA_HERE) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_for) COMMA_HERE) ;
}

//---------------------------------------------------------------------------*

void goil_template_parser::
pr_template_instruction_goil_template_parser_452_27_parse (goil_template_scanner & inLexique) {
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_for) COMMA_HERE) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_identifier) COMMA_HERE) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_in) COMMA_HERE) ;
  { bool syntaxRepeat_8 = true ;
    while (syntaxRepeat_8) {
        nt_expression_parse (inLexique) ;
      switch (select_goil_template_parser_8 (inLexique)) {
        case 2 : {
          inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1__2C_) COMMA_HERE) ;
          } break ;
        default :
          syntaxRepeat_8 = false ;
          break ;
      }
    }
  }
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_do) COMMA_HERE) ;
    nt_template_instruction_list_parse (inLexique) ;
    switch (select_goil_template_parser_9 (inLexique)) {
      case 1 : {
        } break ;
      case 2 : {
        inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_between) COMMA_HERE) ;
          nt_template_instruction_list_parse (inLexique) ;
        } break ;
      default :
        break ;
    }
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_end) COMMA_HERE) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (goil_template_scanner::goil_template_scanner_1_for) COMMA_HERE) ;
  GGS_lstring::constructor_retrieveAndResetTemplateString (inLexique COMMA_HERE) ;
}

//---------------------------------------------------------------------------*

