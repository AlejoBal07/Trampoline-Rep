//---------------------------------------------------------------------------*
//                                                                           *
//                          File 'cfg_syntax.cpp'                            *
//                        Generated by version 1.9.7                         *
//                     december 17th, 2009, at 9h55'52"                      *
//                                                                           *
//---------------------------------------------------------------------------*

//--- START OF USER ZONE 1


//--- END OF USER ZONE 1

//---------------------------------------------------------------------------*

#include "version_libpm.h"
#if LIBPM_VERSION != 629
  #error "This file has been compiled with a version of GALGAS different than the version of libpm"
#endif

//---------------------------------------------------------------------------*

#include <typeinfo>
#include "utilities/MF_MemoryControl.h"
#include "files/C_TextFileWrite.h"
#include "galgas/C_galgas_CLI_Options.h"
#include "cfg_syntax.h"

//---------------------------------------------------------------------------*

#ifndef DO_NOT_GENERATE_CHECKINGS
  #define SOURCE_FILE_AT_LINE(line) "cfg_syntax.ggs", line
  #define COMMA_SOURCE_FILE_AT_LINE(line) , SOURCE_FILE_AT_LINE(line)
#else
  #define SOURCE_FILE_AT_LINE(line) 
  #define COMMA_SOURCE_FILE_AT_LINE(line) 
#endif


//--- START OF USER ZONE 2


//--- END OF USER ZONE 2

//---------------------------------------------------------------------------*
//                                                                           *
//              Implementation of production rule 'cfg_start'                *
//                                                                           *
//---------------------------------------------------------------------------*

void cfg_syntax::
pr_cfg_start_cfg_syntax_37_16_ (cfg_lexique & inLexique,
                                GGS_config  &var_cas_cfg) {
  var_cas_cfg = GGS_config ::constructor_emptyMap (inLexique COMMA_HERE) ;
  GGS_cfg_attrs  var_cas_task_attrs = GGS_cfg_attrs ::constructor_emptyMap (inLexique COMMA_HERE) ;
  GGS_cfg_attrs  var_cas_isr_attrs = GGS_cfg_attrs ::constructor_emptyMap (inLexique COMMA_HERE) ;
  GGS_cfg_attrs  var_cas_isr_code_attrs = GGS_cfg_attrs ::constructor_emptyMap (inLexique COMMA_HERE) ;
  GGS_cfg_attrs  var_cas_counter_code_attrs = GGS_cfg_attrs ::constructor_emptyMap (inLexique COMMA_HERE) ;
  GGS_basic_type  var_cas_its = GGS_void ::constructor_new (inLexique, GGS_location (inLexique) COMMA_HERE) ;
  { bool syntaxRepeat_0 = true ;
    while (syntaxRepeat_0) {
      switch (select_cfg_syntax_0 (inLexique)) {
        case 2 : {
          GGS_luint64  var_cas_tpn ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1_tp_5F_ns_5F_per_5F_counter_5F_tick) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__3D_) COMMA_HERE) ;
          inLexique.assignFromAttribute_integer (var_cas_tpn) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1_uint) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__3B_) COMMA_HERE) ;
          const GGS_bool cond_1221 = var_cas_cfg.reader_hasKey (GGS_string ("wd_ticks_per_ns")) ;
          if (cond_1221.isBuiltAndTrue ()) {
            GGS_location (inLexique).reader_location (inLexique COMMA_HERE).signalGGSSemanticError (inLexique, GGS_string ("Redefinition of tp_ns_per_counter_tick") COMMA_SOURCE_FILE_AT_LINE (54)) ;
          }else if (cond_1221.isBuiltAndFalse ()) {
            var_cas_cfg.modifier_put (inLexique, GGS_lstring ::constructor_new (inLexique, GGS_string ("wd_ticks_per_ns"), GGS_location (inLexique) COMMA_HERE), GGS_uint64_class ::constructor_new (inLexique, var_cas_tpn.reader_location (inLexique COMMA_SOURCE_FILE_AT_LINE (57)), var_cas_tpn.reader_uint64 (inLexique COMMA_SOURCE_FILE_AT_LINE (57)) COMMA_HERE) COMMA_SOURCE_FILE_AT_LINE (55)) ;
          }
          } break ;
        case 3 : {
          GGS_luint64  var_cas_s_align ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1_stack_5F_alignment) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__3D_) COMMA_HERE) ;
          inLexique.assignFromAttribute_integer (var_cas_s_align) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1_uint) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__3B_) COMMA_HERE) ;
          const GGS_bool cond_1615 = var_cas_cfg.reader_hasKey (GGS_string ("stack_align")) ;
          if (cond_1615.isBuiltAndTrue ()) {
            GGS_location (inLexique).reader_location (inLexique COMMA_HERE).signalGGSSemanticError (inLexique, GGS_string ("Redefinition of stack_alignment") COMMA_SOURCE_FILE_AT_LINE (65)) ;
          }else if (cond_1615.isBuiltAndFalse ()) {
            var_cas_cfg.modifier_put (inLexique, GGS_lstring ::constructor_new (inLexique, GGS_string ("stack_align"), GGS_location (inLexique) COMMA_HERE), GGS_uint64_class ::constructor_new (inLexique, var_cas_s_align.reader_location (inLexique COMMA_SOURCE_FILE_AT_LINE (68)), var_cas_s_align.reader_uint64 (inLexique COMMA_SOURCE_FILE_AT_LINE (68)) COMMA_HERE) COMMA_SOURCE_FILE_AT_LINE (66)) ;
          }
          } break ;
        case 4 : {
          GGS_lstring  var_cas_oil_attr ;
          GGS_lstring  var_cas_tpl_attr ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1_task) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__7B_) COMMA_HERE) ;
          nt_cfg_attrs_ (inLexique, var_cas_task_attrs) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__7D_) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__3B_) COMMA_HERE) ;
          } break ;
        case 5 : {
          GGS_lstring  var_cas_oil_attr ;
          GGS_lstring  var_cas_tpl_attr ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1_isr) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__7B_) COMMA_HERE) ;
          nt_cfg_attrs_ (inLexique, var_cas_isr_attrs) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__7D_) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__3B_) COMMA_HERE) ;
          } break ;
        case 6 : {
          GGS_lstring  var_cas_oil_attr ;
          GGS_lstring  var_cas_tpl_attr ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1_isr_5F_code) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__7B_) COMMA_HERE) ;
          nt_cfg_attrs_ (inLexique, var_cas_isr_code_attrs) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__7D_) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__3B_) COMMA_HERE) ;
          } break ;
        case 7 : {
          GGS_lstring  var_cas_oil_attr ;
          GGS_lstring  var_cas_tpl_attr ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1_counter_5F_code) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__7B_) COMMA_HERE) ;
          nt_cfg_attrs_ (inLexique, var_cas_counter_code_attrs) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__7D_) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__3B_) COMMA_HERE) ;
          } break ;
        case 8 : {
          nt_interrupts_ (inLexique, var_cas_its) ;
          } break ;
        default :
          syntaxRepeat_0 = false ;
          break ;
      }
    }
  }
  var_cas_cfg.modifier_put (inLexique, GGS_lstring ::constructor_new (inLexique, GGS_string ("task_attrs"), GGS_location (inLexique) COMMA_HERE), GGS_attrs ::constructor_new (inLexique, GGS_location (inLexique), var_cas_task_attrs COMMA_HERE) COMMA_SOURCE_FILE_AT_LINE (91)) ;
  var_cas_cfg.modifier_put (inLexique, GGS_lstring ::constructor_new (inLexique, GGS_string ("isr_attrs"), GGS_location (inLexique) COMMA_HERE), GGS_attrs ::constructor_new (inLexique, GGS_location (inLexique), var_cas_isr_attrs COMMA_HERE) COMMA_SOURCE_FILE_AT_LINE (95)) ;
  var_cas_cfg.modifier_put (inLexique, GGS_lstring ::constructor_new (inLexique, GGS_string ("isr_code_attrs"), GGS_location (inLexique) COMMA_HERE), GGS_attrs ::constructor_new (inLexique, GGS_location (inLexique), var_cas_isr_code_attrs COMMA_HERE) COMMA_SOURCE_FILE_AT_LINE (99)) ;
  var_cas_cfg.modifier_put (inLexique, GGS_lstring ::constructor_new (inLexique, GGS_string ("counter_code_attrs"), GGS_location (inLexique) COMMA_HERE), GGS_attrs ::constructor_new (inLexique, GGS_location (inLexique), var_cas_counter_code_attrs COMMA_HERE) COMMA_SOURCE_FILE_AT_LINE (103)) ;
  var_cas_cfg.modifier_put (inLexique, GGS_lstring ::constructor_new (inLexique, GGS_string ("it_sources"), GGS_location (inLexique) COMMA_HERE), var_cas_its COMMA_SOURCE_FILE_AT_LINE (107)) ;
}

//---------------------------------------------------------------------------*
//                                                                           *
//              Implementation of production rule 'cfg_attrs'                *
//                                                                           *
//---------------------------------------------------------------------------*

void cfg_syntax::
pr_cfg_attrs_cfg_syntax_111_16_ (cfg_lexique & inLexique,
                                GGS_cfg_attrs  &var_cas_attrs) {
  { bool syntaxRepeat_1 = true ;
    while (syntaxRepeat_1) {
      switch (select_cfg_syntax_1 (inLexique)) {
        case 2 : {
          GGS_lstring  var_cas_oil_attr ;
          GGS_lstring  var_cas_tpl_attr ;
          inLexique.assignFromAttribute_keyword (var_cas_oil_attr) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1_idf) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__3D_) COMMA_HERE) ;
          inLexique.assignFromAttribute_keyword (var_cas_tpl_attr) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1_idf) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__3B_) COMMA_HERE) ;
          var_cas_attrs.modifier_put (inLexique, var_cas_oil_attr, var_cas_tpl_attr COMMA_SOURCE_FILE_AT_LINE (119)) ;
          } break ;
        default :
          syntaxRepeat_1 = false ;
          break ;
      }
    }
  }
}

//---------------------------------------------------------------------------*
//                                                                           *
//              Implementation of production rule 'interrupts'               *
//                                                                           *
//---------------------------------------------------------------------------*

void cfg_syntax::
pr_interrupts_cfg_syntax_123_17_ (cfg_lexique & inLexique,
                                GGS_basic_type  &var_cas_its) {
  GGS_ident_map  var_cas_it_src = GGS_ident_map ::constructor_emptyMap (inLexique COMMA_HERE) ;
  GGS_luint64  var_cas_it_count ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1_interrupts) COMMA_HERE) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__5B_) COMMA_HERE) ;
  inLexique.assignFromAttribute_integer (var_cas_it_count) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1_uint) COMMA_HERE) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__5D_) COMMA_HERE) ;
  const GGS_bool cond_3384 = (var_cas_it_count.reader_uint64 (inLexique COMMA_SOURCE_FILE_AT_LINE (129))).operator_strictSup (GGS_uint64 (32ULL)) ;
  if (cond_3384.isBuiltAndTrue ()) {
    var_cas_it_count.reader_location (inLexique COMMA_HERE).signalGGSSemanticError (inLexique, GGS_string ("Interrupt count must be <= 32") COMMA_SOURCE_FILE_AT_LINE (131)) ;
  }
  GGS_location  var_cas_it_loc = GGS_location (inLexique) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__7B_) COMMA_HERE) ;
  { bool syntaxRepeat_2 = true ;
    while (syntaxRepeat_2) {
      switch (select_cfg_syntax_2 (inLexique)) {
        case 2 : {
          GGS_lstring  var_cas_src ;
          GGS_luint64  var_cas_id ;
          inLexique.assignFromAttribute_keyword (var_cas_src) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1_idf) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__3D_) COMMA_HERE) ;
          inLexique.assignFromAttribute_integer (var_cas_id) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1_uint) COMMA_HERE) ;
          inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__3B_) COMMA_HERE) ;
          const GGS_bool cond_3658 = (var_cas_id.reader_uint64 (inLexique COMMA_SOURCE_FILE_AT_LINE (138))).operator_supOrEqual (var_cas_it_count.reader_uint64 (inLexique COMMA_SOURCE_FILE_AT_LINE (138))) ;
          if (cond_3658.isBuiltAndTrue ()) {
            var_cas_id.reader_location (inLexique COMMA_HERE).signalGGSSemanticError (inLexique, GGS_string ("Interrupt id out of range") COMMA_SOURCE_FILE_AT_LINE (140)) ;
            var_cas_it_count.reader_location (inLexique COMMA_HERE).signalGGSSemanticError (inLexique, GGS_string ("Range was defined here") COMMA_SOURCE_FILE_AT_LINE (141)) ;
          }
          var_cas_it_src.modifier_put (inLexique, var_cas_src, GGS_uint64_class ::constructor_new (inLexique, var_cas_id.reader_location (inLexique COMMA_SOURCE_FILE_AT_LINE (142)), var_cas_id.reader_uint64 (inLexique COMMA_SOURCE_FILE_AT_LINE (142)) COMMA_HERE) COMMA_SOURCE_FILE_AT_LINE (142)) ;
          } break ;
        default :
          syntaxRepeat_2 = false ;
          break ;
      }
    }
  }
  inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__7D_) COMMA_HERE) ;
  inLexique.acceptTerminal (ACCEPT_TERMINAL (cfg_lexique::cfg_lexique_1__3B_) COMMA_HERE) ;
  var_cas_its = GGS_interrupts ::constructor_new (inLexique, var_cas_it_loc, var_cas_it_count, var_cas_it_src COMMA_HERE) ;
}

//---------------------------------------------------------------------------*

