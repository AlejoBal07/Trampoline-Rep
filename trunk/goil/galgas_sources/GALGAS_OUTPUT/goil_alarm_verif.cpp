//---------------------------------------------------------------------------*
//                                                                           *
//                       File 'goil_alarm_verif.cpp'                         *
//                 Generated by version GALGAS_BETA_VERSION                  *
//                      june 17th, 2010, at 18h54'31"                        *
//                                                                           *
//---------------------------------------------------------------------------*

//--- START OF USER ZONE 1


//--- END OF USER ZONE 1

#include "version_libpm.h"
#if CURRENT_LIBPM_VERSION != VERSION_OF_LIBPM_USED_BY_GALGAS_COMPILER
  #error "This file has been compiled with a version of GALGAS that uses libpm version VERSION_OF_LIBPM_USED_BY_GALGAS_COMPILER, different than the current version (CURRENT_LIBPM_VERSION) of libpm"
#endif

//---------------------------------------------------------------------------*

#include "goil_alarm_verif.h"
#include "galgas-utilities/C_Compiler.h"
#include "galgas/C_galgas_CLI_Options.h"

//---------------------------------------------------------------------------*

#include "goil_options.h"

//---------------------------------------------------------------------------*

#ifndef DO_NOT_GENERATE_CHECKINGS
  #define SOURCE_FILE_AT_LINE(line) "goil_alarm_verif.gSemantics", line
  #define COMMA_SOURCE_FILE_AT_LINE(line) , SOURCE_FILE_AT_LINE(line)
#else
  #define SOURCE_FILE_AT_LINE(line) 
  #define COMMA_SOURCE_FILE_AT_LINE(line) 
#endif

//---------------------------------------------------------------------------*
//                                                                           *
//                   Routine 'counters_of_alarms_defined'                    *
//                                                                           *
//---------------------------------------------------------------------------*

void routine_counters_5F_of_5F_alarms_5F_defined (GALGASap_alarm_5F_map inArgument_alarms,
                                                  GALGASap_counter_5F_map inArgument_counters,
                                                  C_Compiler * inCompiler
                                                  COMMA_UNUSED_LOCATION_ARGS) {
  //-------- @foreachInstructionForGeneration
  GALGAS_alarm_5F_map::cEnumerator enumerator_456 (inArgument_alarms, true) ;
  //--- simple foreach instruction
  while (enumerator_456.hasCurrentObject ()) {
    enumerator_456.updateAttributeProxies () ;
    //-------- @localVariableOrConstantDeclarationWithSourceExpressionForGeneration
    //--- @readerCallExpressionForGeneration
    GALGASap_lstring temp_0 (enumerator_456.attribute_alarm.readerCall_counter_5F_name (SOURCE_FILE_AT_LINE (20))) ;
    GALGASap_lstring var_counter (temp_0) ;
    //-------- @ifInstructionForGeneration
    //--- @andExpressionForGeneration
    //--- @notExpressionForGeneration
    //--- @readerCallExpressionForGeneration
    //--- @readerCallExpressionForGeneration
    GALGASap_string temp_1 (var_counter.readerCall_string (SOURCE_FILE_AT_LINE (21))) ;
    GALGASap_bool temp_2 (inArgument_counters.readerCall_hasKey (temp_1 COMMA_SOURCE_FILE_AT_LINE (21))) ;
    GALGASap_bool temp_3 (temp_2.operator_not (SOURCE_FILE_AT_LINE (21))) ;
    //--- @notEqualExpressionForGeneration
    //--- @readerCallExpressionForGeneration
    GALGASap_string temp_4 (var_counter.readerCall_string (SOURCE_FILE_AT_LINE (21))) ;
    //--- @literalStringExpressionForGeneration
    GALGASap_string temp_5 ("SystemCounter" COMMA_SOURCE_FILE_AT_LINE (21)) ;
    GALGASap_bool temp_6 (kIsNotEqual, GALGASap_string::objectCompare (temp_4, temp_5) COMMA_SOURCE_FILE_AT_LINE (21)) ;
    GALGASap_bool temp_7 (temp_3.operator_and (temp_6 COMMA_SOURCE_FILE_AT_LINE (21))) ;
    if (isValidAndTrue (temp_7)) {
      //-------- @errorInstructionForGeneration
      //--- @concatExpressionForGeneration
      //--- @concatExpressionForGeneration
      //--- @literalStringExpressionForGeneration
      GALGASap_string temp_8 ("counter " COMMA_SOURCE_FILE_AT_LINE (22)) ;
      //--- @readerCallExpressionForGeneration
      GALGASap_string temp_9 (var_counter.readerCall_string (SOURCE_FILE_AT_LINE (22))) ;
      GALGASap_string temp_10 (temp_8.operator_concat (temp_9 COMMA_SOURCE_FILE_AT_LINE (22))) ;
      //--- @literalStringExpressionForGeneration
      GALGASap_string temp_11 (" is not defined !" COMMA_SOURCE_FILE_AT_LINE (22)) ;
      GALGASap_string temp_12 (temp_10.operator_concat (temp_11 COMMA_SOURCE_FILE_AT_LINE (22))) ;
      GALGASap_location location_13 (var_counter.readerCall_location (HERE)) ; // Implicit use of 'location' reader
      inCompiler->emitSemanticError (location_13, temp_12 COMMA_SOURCE_FILE_AT_LINE (22)) ;
    }else{
      //-------- @structuredCastInstructionForGeneration
      //--- @readerCallExpressionForGeneration
      GALGASap_autostart_5F_obj temp_14 (enumerator_456.attribute_alarm.readerCall_autostart_5F_params (SOURCE_FILE_AT_LINE (29))) ;
      if (temp_14.isValid ()) {
        if (temp_14.ptr (HERE)->typeDescriptor () == & kTypeDescriptor_GALGAS_alarm_5F_autostart_5F_true) {
        GALGASap_alarm_5F_autostart_5F_true cast_934_a = temp_14 ;
          //-------- @localVariableOrConstantDeclarationWithSourceExpressionForGeneration
          //--- @readerCallExpressionForGeneration
          GALGASap_location temp_15 (cast_934_a.readerCall_location (SOURCE_FILE_AT_LINE (31))) ;
          GALGASap_location var_alarm_5F_loc (temp_15) ;
          //-------- @localVariableOrConstantDeclarationWithSourceExpressionForGeneration
          //--- @readerCallExpressionForGeneration
          //--- @readerCallExpressionForGeneration
          //--- @readerCallExpressionForGeneration
          GALGASap_luint_36__34_ temp_16 (cast_934_a.readerCall_alarm_5F_time (SOURCE_FILE_AT_LINE (32))) ;
          GALGASap_uint_36__34_ temp_17 (temp_16.readerCall_uint_36__34_ (SOURCE_FILE_AT_LINE (32))) ;
          GALGASap_uint temp_18 (temp_17.readerCall_uint (inCompiler COMMA_SOURCE_FILE_AT_LINE (32))) ;
          GALGASap_uint var_alarm_5F_time (temp_18) ;
          //-------- @localVariableOrConstantDeclarationWithSourceExpressionForGeneration
          //--- @readerCallExpressionForGeneration
          //--- @readerCallExpressionForGeneration
          //--- @readerCallExpressionForGeneration
          GALGASap_luint_36__34_ temp_19 (cast_934_a.readerCall_cycle_5F_time (SOURCE_FILE_AT_LINE (33))) ;
          GALGASap_uint_36__34_ temp_20 (temp_19.readerCall_uint_36__34_ (SOURCE_FILE_AT_LINE (33))) ;
          GALGASap_uint temp_21 (temp_20.readerCall_uint (inCompiler COMMA_SOURCE_FILE_AT_LINE (33))) ;
          GALGASap_uint var_cycle_5F_time (temp_21) ;
          //-------- @ifInstructionForGeneration
          //--- @equalExpressionForGeneration
          //--- @literalUIntExpressionForGeneration
          GALGASap_uint temp_22 ((PMUInt32) 0U COMMA_SOURCE_FILE_AT_LINE (36)) ;
          GALGASap_bool temp_23 (kIsEqual, GALGASap_uint::objectCompare (var_alarm_5F_time, temp_22) COMMA_SOURCE_FILE_AT_LINE (36)) ;
          if (isValidAndTrue (temp_23)) {
            //-------- @ifInstructionForGeneration
            //--- @equalExpressionForGeneration
            //--- @optionValueExpressionForGeneration
            GALGASap_bool temp_24 (GALGASap_bool::constructor_new (gOption_goil_5F_options_autosar_5F_on.mValue COMMA_SOURCE_FILE_AT_LINE (37))) ;
            //--- @trueExpressionForGeneration
            GALGASap_bool temp_25 (true COMMA_SOURCE_FILE_AT_LINE (37)) ;
            GALGASap_bool temp_26 (kIsEqual, GALGASap_bool::objectCompare (temp_24, temp_25) COMMA_SOURCE_FILE_AT_LINE (37)) ;
            if (isValidAndTrue (temp_26)) {
              //-------- @errorInstructionForGeneration
              //--- @readerCallExpressionForGeneration
              GALGASap_luint_36__34_ temp_27 (cast_934_a.readerCall_alarm_5F_time (SOURCE_FILE_AT_LINE (38))) ;
              //--- @literalStringExpressionForGeneration
              GALGASap_string temp_28 ("ALARMTIME must be > 0" COMMA_SOURCE_FILE_AT_LINE (38)) ;
              GALGASap_location location_29 (temp_27.readerCall_location (HERE)) ; // Implicit use of 'location' reader
              inCompiler->emitSemanticError (location_29, temp_28 COMMA_SOURCE_FILE_AT_LINE (38)) ;
            }else{
              //-------- @warningInstructionForGeneration
              //--- @readerCallExpressionForGeneration
              GALGASap_luint_36__34_ temp_30 (cast_934_a.readerCall_alarm_5F_time (SOURCE_FILE_AT_LINE (40))) ;
              //--- @literalStringExpressionForGeneration
              GALGASap_string temp_31 ("ALARMTIME equal to 0 has an undefined behavior" COMMA_SOURCE_FILE_AT_LINE (40)) ;
              GALGASap_location location_32 (temp_30.readerCall_location (HERE)) ; // Implicit use of 'location' reader
              inCompiler->emitSemanticWarning (location_32, temp_31 COMMA_SOURCE_FILE_AT_LINE (40)) ;
            }
          }
          //-------- @localVariableDeclarationForGeneration
          GALGASap_counter_5F_obj var_ct ;
          { //-------- @methodCallInstructionForGeneration
          inArgument_counters.instanceMethodCall_getCounter (var_counter, var_ct, inCompiler COMMA_SOURCE_FILE_AT_LINE (45)) ;
          } //-------- END @methodCallInstructionForGeneration
          //-------- @structuredCastInstructionForGeneration
          //--- @readerCallExpressionForGeneration
          GALGASap_basic_5F_type temp_33 (var_ct.readerCall_max_5F_allowed_5F_value (SOURCE_FILE_AT_LINE (46))) ;
          if (temp_33.isValid ()) {
            if (temp_33.ptr (HERE)->typeDescriptor () == & kTypeDescriptor_GALGAS_uint_33__32__5F_class) {
            GALGASap_uint_33__32__5F_class cast_1638_mc = temp_33 ;
              //-------- @ifInstructionForGeneration
              //--- @strictGreaterExpressionForGeneration
              //--- @readerCallExpressionForGeneration
              GALGASap_uint temp_34 (cast_1638_mc.readerCall_value (SOURCE_FILE_AT_LINE (48))) ;
              GALGASap_bool temp_35 (kIsStrictSup, GALGASap_uint::objectCompare (var_alarm_5F_time, temp_34) COMMA_SOURCE_FILE_AT_LINE (48)) ;
              if (isValidAndTrue (temp_35)) {
                //-------- @errorInstructionForGeneration
                //--- @readerCallExpressionForGeneration
                GALGASap_location temp_36 (cast_934_a.readerCall_location (SOURCE_FILE_AT_LINE (49))) ;
                //--- @literalStringExpressionForGeneration
                GALGASap_string temp_37 ("ALARMTIME is greater than counter MAXALLOWEDVALUE" COMMA_SOURCE_FILE_AT_LINE (49)) ;
                inCompiler->emitSemanticError (temp_36, temp_37 COMMA_SOURCE_FILE_AT_LINE (49)) ;
              }
              //-------- @ifInstructionForGeneration
              //--- @strictGreaterExpressionForGeneration
              //--- @readerCallExpressionForGeneration
              GALGASap_uint temp_38 (cast_1638_mc.readerCall_value (SOURCE_FILE_AT_LINE (51))) ;
              GALGASap_bool temp_39 (kIsStrictSup, GALGASap_uint::objectCompare (var_cycle_5F_time, temp_38) COMMA_SOURCE_FILE_AT_LINE (51)) ;
              if (isValidAndTrue (temp_39)) {
                //-------- @errorInstructionForGeneration
                //--- @readerCallExpressionForGeneration
                GALGASap_location temp_40 (cast_934_a.readerCall_location (SOURCE_FILE_AT_LINE (52))) ;
                //--- @literalStringExpressionForGeneration
                GALGASap_string temp_41 ("CYCLETIME is greater than counter MAXALLOWEDVALUE" COMMA_SOURCE_FILE_AT_LINE (52)) ;
                inCompiler->emitSemanticError (temp_40, temp_41 COMMA_SOURCE_FILE_AT_LINE (52)) ;
              }
            }
          }
        }
      }
    }
    enumerator_456.next() ;
  }
}

//--- START OF USER ZONE 2


//--- END OF USER ZONE 2


